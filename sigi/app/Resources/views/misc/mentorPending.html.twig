{% extends 'base.html.twig' %}

{% block body %}
    <h1>Pendientes</h1>

    Aquí encontrará los items que requieren su atención

    <!-- Nav tabs -->
      <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a href="#Recibidos" aria-controls="Recibidos" role="tab" data-toggle="tab">Postulaciones ({{applications|length}})</a></li>
        <li role="presentation"><a href="#Enviados" aria-controls="Enviados" role="tab" data-toggle="tab">Enviados</a></li>        
      </ul>

      <!-- Tab panes -->
      <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="Recibidos">

		    <table class="table table-striped">
		        <thead>
		            <tr>
		                <th>Id</th>
		                <th>Oportunidad</th>
		                {% if is_granted(['ROLE_MENTOR']) %}
		                    <th>Alumno</th>
		                {% endif %}
		                {% if is_granted([  'ROLE_STUDENT']) %}
		                    <th>Mentor</th>
		                {% endif %}
		                <th>Estado</th>
		                <th>Fecha de Postulación</th>
		                <th>Última Actualización</th>
		                <th></th>
		            </tr>
		        </thead>
		        <tbody>
		        {% for application in applications %}
		            <tr>
		                <td><a href="{{ path('application_show', { 'id': application.id }) }}">{{ application.id }}</a></td>
		                <td>{{ application.oportunityResearch.getName() }}</td>
		                {% if is_granted(['ROLE_MENTOR']) %}
		                    <td>{{ application.student.getNameText() }}</td>
		                {% endif %}
		                {% if is_granted(['ROLE_STUDENT']) %}
		                    <td>
		                        <ul>
		                            {% for mentorName in application.oportunityResearch.getMentorsName() %}
		                                <li>
		                                    {{ mentorName }}
		                                </li>
		                            {% endfor %}
		                        </ul>
		                    </td>
		                {% endif %}
		                <td>{{ application.getStateText() }}</td>
		                <td>{% if application.applicationDate %}{{ application.applicationDate|date('d/M/y') }}{% endif %}</td>
		                <td>{% if application.lastUpdateDate %}{{ application.lastUpdateDate|date('d/M/y H:i:s') }}{% endif %}</td>
		                <td><a href="{{ path('application_show', { 'id': application.id }) }}" class="btn btn-info btn1" role="button">Ver</a></td>
		            </tr>
		        {% endfor %}
		        </tbody>
		    </table>
		    </div>
        	<div role="tabpanel" class="tab-pane" id="Enviados">
        		bla
		    </div>
      </div>
    </div>
    
{% endblock %}
